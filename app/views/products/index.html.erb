<h1 class="text-center my-4">Products</h1>
<div class="table-responsive">
  <table class="table w-75 table-bordered table-striped table-hover m-auto text-center">
    <% if current_user.admin? %>  
      <div class="w-75 mx-auto text-end my-2 d-flex justify-content-end">
        <%= link_to "New Product", new_product_path, class: "text-decoration-none text-light btn btn-info" %>
      </div>
    <% end %>
  
    <tr>
      <th>Index</th>
      <th>Title</th>
      <th>Description</th>
      <th>Price</th>
      <th>Total Order Count</th>
      <th>Product Action</th>
      <% if current_user.admin? %>  
        <th>Order Action</th>
      <% end %>
    </tr>

    <% @products.each_with_index do |product,inx| %>
      <tr>
        <td><%= inx+1 %></td>
        <td><%= product.title %></td>
        <td><%= product.description %></td>
        <td><%= product.price %></td>
        <td><%= product.orders.size %></td>
        <td><%= link_to 'Show', product, class: "text-decoration-none text-light btn btn-info me-2" %>
        <% if current_user.admin? %>  
          <%= link_to 'Edit', edit_product_path(product), class: "text-decoration-none text-dark btn btn-warning me-2" %>
          <%= link_to "Destroy", product_path(product), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "text-decoration-none text-light btn btn-danger" %></td>
          <td><%= link_to 'Order', new_product_order_path(product), class: "text-decoration-none text-dark btn btn-info me-2" %></td>
        <% end %>
      </tr>
    <% end %>
    
  </table>
</div>
<br><br>
